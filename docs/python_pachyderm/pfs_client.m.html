<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>python_pachyderm.pfs_client API documentation</title>
    <meta name="description" content="" />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>


  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module variables</a></h3>
      
  <ul>
    <li class="mono"><a href="#python_pachyderm.pfs_client.BUFFER_SIZE">BUFFER_SIZE</a></li>
  </ul>

    </li>


    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#python_pachyderm.pfs_client.ExtractValueIterator">ExtractValueIterator</a></span>
        
          
  <ul>
    <li class="mono"><a href="#python_pachyderm.pfs_client.ExtractValueIterator.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#python_pachyderm.pfs_client.PfsClient">PfsClient</a></span>
        
          
  <ul>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.__init__">__init__</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.commit">commit</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.create_repo">create_repo</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.delete_all">delete_all</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.delete_branch">delete_branch</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.delete_commit">delete_commit</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.delete_file">delete_file</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.delete_repo">delete_repo</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.finish_commit">finish_commit</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.flush_commit">flush_commit</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.get_file">get_file</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.get_files">get_files</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.glob_file">glob_file</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.inspect_commit">inspect_commit</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.inspect_file">inspect_file</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.inspect_repo">inspect_repo</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.list_branch">list_branch</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.list_commit">list_commit</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.list_file">list_file</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.list_repo">list_repo</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.provenances_for_repo">provenances_for_repo</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.put_file_bytes">put_file_bytes</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.put_file_url">put_file_url</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.set_branch">set_branch</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.start_commit">start_commit</a></li>
    <li class="mono"><a href="#python_pachyderm.pfs_client.PfsClient.subscribe_commit">subscribe_commit</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">python_pachyderm.pfs_client</span> module</h1>
  
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client" class="source">
    <pre><code># -*- coding: utf-8 -*-

from __future__ import absolute_import

import collections
import os
from contextlib import contextmanager

import six

from python_pachyderm.client.pfs import pfs_pb2 as proto
from python_pachyderm.client.pfs import pfs_pb2_grpc as grpc
from python_pachyderm.util import commit_from, get_address


BUFFER_SIZE = 3 * 1024 * 1024  # 3MB TODO: Base this on some grpc value


class ExtractValueIterator(object):
    def __init__(self, r):
        self._iter = r

    def __iter__(self):
        for item in self._iter:
            yield item.value


class PfsClient(object):
    def __init__(self, host=None, port=None):
        """
        Creates a client to connect to Pfs
        :param host: The pachd host. Default is 'localhost', which is used with `pachctl port-forward`
        :param port: The port to connect to. Default is 30650
        """
        # If a host or port is not specified, then try to set using environment variables or use the defaults.
        address = get_address(host, port)
        self.channel = grpc.grpc.insecure_channel(address)
        self.stub = grpc.APIStub(self.channel)

    def create_repo(self, repo_name, description=None):
        """
        Creates a new Repo object in pfs with the given name. Repos are
        the top level data object in pfs and should be used to store data of a
        similar type. For example rather than having a single Repo for an entire
        project you might have seperate Repos for logs, metrics, database dumps etc.
        :param repo_name: Name of the repo
        :param description: Repo description
        """
        self.stub.CreateRepo(proto.CreateRepoRequest(repo=proto.Repo(name=repo_name), description=description))

    def inspect_repo(self, repo_name):
        """
        returns info about a specific Repo.
        :param repo_name: Name of the repo
        :return: A RepoInfo object
        """
        return self.stub.InspectRepo(proto.InspectRepoRequest(repo=proto.Repo(name=repo_name)))

    def list_repo(self):
        """
        Returns info about all Repos.

        :param provenance: Optional. Specifies a set of provenance repos where only repos which have ALL of
        the specified repos as provenance will be returned.
        :return: A list of RepoInfo objects
        """
        x = self.stub.ListRepo(proto.ListRepoRequest())
        if hasattr(x, 'repo_info'):
            return x.repo_info
        return []

    def delete_repo(self, repo_name=None, force=False, all=False):
        """
        Deletes a repo and reclaims the storage space it was using. Note
        that as of 1.0 we do not reclaim the blocks that the Repo was referencing,
        this is because they may also be referenced by other Repos and deleting them
        would make those Repos inaccessible. This will be resolved in later
        versions.
        :param repo_name: The name of the repo
        :param force: if set to true, the repo will be removed regardless of errors.
                      This argument should be used with care.
        :param all: Delete all repos
        """
        if not all:
            if repo_name:
                self.stub.DeleteRepo(proto.DeleteRepoRequest(repo=proto.Repo(name=repo_name), force=force))
            else:
                raise ValueError("Either a repo_name or all=True needs to be provided")
        else:
            if not repo_name:
                self.stub.DeleteRepo(proto.DeleteRepoRequest(force=force, all=all))
            else:
                raise ValueError("Cannot specify a repo_name if all=True")

    def start_commit(self, repo_name, branch=None, parent=None):
        """
        Begins the process of committing data to a Repo. Once started
        you can write to the Commit with PutFile and when all the data has been
        written you must finish the Commit with FinishCommit. NOTE, data is not
        persisted until FinishCommit is called.
        :param repo_name: The name of the repo
        :param branch: is a more convenient way to build linear chains of commits. When a
                    commit is started with a non empty branch the value of branch becomes an
                    alias for the created Commit. This enables a more intuitive access pattern.
                    When the commit is started on a branch the previous head of the branch is
                    used as the parent of the commit.
        :param parent: specifies the parent Commit, upon creation the new Commit will
                    appear identical to the parent Commit, data can safely be added to the new
                    commit without affecting the contents of the parent Commit. You may pass ""
                    as parentCommit in which case the new Commit will have no parent and will
                    initially appear empty.
        :return: Commit object
        """
        return self.stub.StartCommit(proto.StartCommitRequest(
            parent=proto.Commit(
                repo=proto.Repo(name=repo_name),
                id=parent
            ),
            branch=branch
        ))

    def finish_commit(self, commit):
        """
        Ends the process of committing data to a Repo and persists the
        Commit. Once a Commit is finished the data becomes immutable and future
        attempts to write to it with PutFile will error.
        :param commit: A tuple or string representing the commit
        """
        self.stub.FinishCommit(proto.FinishCommitRequest(commit=commit_from(commit)))

    @contextmanager
    def commit(self, repo_name, branch=None, parent=None):
        """
        A context manager for doing stuff inside a commit
        """
        commit = self.start_commit(repo_name, branch, parent)
        try:
            yield commit
        except Exception as e:
            print("An exception occurred during an open commit. "
                  "Trying to finish it (Currently a commit can't be cancelled)")
            raise e
        finally:
            self.finish_commit(commit)

    def inspect_commit(self, commit):
        """
        returns info about a specific Commit.
        :param commit: A tuple or string representing the commit
        :return: CommitInfo object
        """
        return self.stub.InspectCommit(proto.InspectCommitRequest(commit=commit_from(commit)))

    def provenances_for_repo(self, repo_name):
        provenances = {}
        commits = self.list_commit(repo_name)
        sorted_commits = [x[0] for x in
                          sorted([(c.commit.id, c.finished.seconds) for c in commits], key=lambda x: x[1])]
        for c in sorted_commits:
            for p in c.provenance:
                provenances[p.id] = c.commit.id
        return provenances

    def list_commit(self, repo_name, to_commit=None, from_commit=None, number=0):
        """
        Lists commits.

        :param repo_name: If only `repo_name` is given, all commits in the repo are returned.
        :param to_commit: optional. only the ancestors of `to`, including `to` itself,
                        are considered.
        :param from_commit: optional. only the descendents of `from`, including `from`
                        itself, are considered.
        :param number: optional. determines how many commits are returned.  If `number` is 0,
                    all commits that match the aforementioned criteria are returned.
        :return: A list of CommitInfo objects
        """
        req = proto.ListCommitRequest(repo=proto.Repo(name=repo_name), number=number)
        if to_commit is not None:
            req.to.CopyFrom(commit_from(to_commit))
        if from_commit is not None:
            getattr(req, 'from').CopyFrom(commit_from(from_commit))
        x = self.stub.ListCommit(req)
        if hasattr(x, 'commit_info'):
            return x.commit_info
        return []

    def delete_commit(self, commit):
        """
        deletes a commit.
        Note it is currently not implemented.
        :param commit: A tuple or string representing the commit
        """
        self.stub.DeleteCommit(proto.DeleteCommitRequest(commit=commit_from(commit)))

    def flush_commit(self, commits, repos=tuple()):
        """
        blocks until all of the commits which have a set of commits as
        provenance have finished. For commits to be considered they must have all of
        the specified commits as provenance. This in effect waits for all of the
        jobs that are triggered by a set of commits to complete.
        It returns an error if any of the commits it's waiting on are cancelled due
        to one of the jobs encountering an error during runtime.
        Note that it's never necessary to call FlushCommit to run jobs, they'll run
        no matter what, FlushCommit just allows you to wait for them to complete and
        see their output once they do.
        :param commits: A commit or a list of commits to wait on
        :param repos: Optional. Only the commits up to and including those repos
                    will be considered, otherwise all repos are considered.
        :return: An iterator of CommitInfo objects
        """
        return self.stub.FlushCommit(proto.FlushCommitRequest(
            commit=[commit_from(c) for c in commits],
            to_repo=[proto.Repo(name=r) for r in repos]
        ))

    def subscribe_commit(self, repo_name, branch, from_commit_id=None):
        """
        SubscribeCommit is like ListCommit but it keeps listening for commits as
        they come in.

        :param repo_name: Name of the repo
        :param branch: Branch to subscribe to
        :param from_commit_id: Optional. only commits created since this commit are returned

        :return: Iterator of Commit objects
        """
        repo = proto.Repo(name=repo_name)
        req = proto.SubscribeCommitRequest(repo=repo, branch=branch)
        if from_commit_id is not None:
            getattr(req, 'from').CopyFrom(proto.Commit(repo=repo, id=from_commit_id))
        return self.stub.SubscribeCommit(req)

    def list_branch(self, repo_name):
        """
        lists the active branches on a Repo
        :param repo_name: The name of the repo
        :return: A list of Branch objects
        """
        x = self.stub.ListBranch(proto.ListBranchRequest(repo=proto.Repo(name=repo_name)))
        if hasattr(x, 'branch_info'):
            return x.branch_info
        return []

    def set_branch(self, commit, branch_name):
        """
        sets a commit and its ancestors as a branch
        :param commit: A tuple or string representing the commit
        :param branch_name: The name for the branch to set
        """
        self.stub.SetBranch(proto.SetBranchRequest(
            commit=commit_from(commit),
            branch=branch_name
        ))

    def delete_branch(self, repo_name, branch_name):
        """
        deletes a branch, but leaves the commits themselves intact.
        In other words, those commits can still be accessed via commit IDs and
        other branches they happen to be on.
        :param repo_name: The name of the repo
        :param branch_name: The name of the branch to delete
        """
        self.stub.DeleteBranch(proto.DeleteBranchRequest(
            repo=Repo(name=repo_name),
            branch=branch_name
        ))

    def put_file_bytes(self, commit, path, value, delimiter=proto.NONE,
                       target_file_datums=0, target_file_bytes=0):
        """
        Uploads a binary bytes array as file(s) in a certain path
        :param commit: A tuple or string representing the commit
        :param path: Path in the repo the file(s) will be written to
        :param value: The data bytes array, or an iterator returning chunked byte arrays
        :param delimiter: Optional. causes data to be broken up into separate files with `path`
                as a prefix.
        :param target_file_datums: Optional. specifies the target number of datums in each written
                file it may be lower if data does not split evenly, but will never be
                higher, unless the value is 0.
        :param target_file_bytes: specifies the target number of bytes in each written
                file, files may have more or fewer bytes than the target.
        """

        if isinstance(value, collections.Iterable) and not isinstance(value, (six.string_types, six.binary_type)):
            def wrap(v):
                for x in v:
                    yield proto.PutFileRequest(
                        file=proto.File(commit=commit_from(commit), path=path),
                        value=x,
                        delimiter=delimiter,
                        target_file_datums=target_file_datums,
                        target_file_bytes=target_file_bytes
                    )
        else:
            def wrap(v):
                for i in range(0, len(v), BUFFER_SIZE):
                    yield proto.PutFileRequest(
                        file=proto.File(commit=commit_from(commit), path=path),
                        value=v[i:i + BUFFER_SIZE],
                        delimiter=delimiter,
                        target_file_datums=target_file_datums,
                        target_file_bytes=target_file_bytes
                    )

        self.stub.PutFile(wrap(value))

    def put_file_url(self, commit, path, url, recursive=False):
        """
        puts a file using the content found at a URL.
        The URL is sent to the server which performs the request.

        :param commit: A tuple or string representing the commit
        :param path: The path to the file
        :param url: The url to download
        :param recursive: allow for recursive scraping of some types URLs for example on s3:// urls.
        """
        self.stub.PutFile(iter([
            proto.PutFileRequest(
                file=File(commit=commit_from(commit), path=path),
                url=url,
                recursive=recursive
            )
        ]))

    def get_file(self, commit, path, offset_bytes=0, size_bytes=0, extract_value=True):
        """
        returns the contents of a file at a specific Commit.

        :param commit: A tuple or string representing the commit
        :param path: The path of the file
        :param offset_bytes: Optional. specifies a number of bytes that should be skipped in the beginning of the file.
        :param size_bytes: Optional. limits the total amount of data returned, note you will get fewer bytes
                than size if you pass a value larger than the size of the file.
                If size is set to 0 then all of the data will be returned.
        :param extract_value: If True, then an ExtractValueIterator will be return, which
                    will iterate over the bytes of the file. If False, then the Protobuf
                    response iterator will return
        :return: An iterator over the file or an iterator over the protobuf responses
        """
        r = self.stub.GetFile(proto.GetFileRequest(
            file=proto.File(commit=commit_from(commit), path=path),
            offset_bytes=offset_bytes,
            size_bytes=size_bytes
        ))
        if extract_value:
            return ExtractValueIterator(r)
        return r

    def get_files(self, commit, paths, recursive=False):
        """
        returns the contents of a list of files at a specific Commit.

        :param commit: A tuple or string representing the commit
        :param paths: A list of paths to retrieve
        :param recursive: If True, will go into each directory in the list recursively
        :return: A dictionary of file paths and data
        """
        filtered_file_infos = []
        for path in paths:
            fi = self.inspect_file(commit, path)
            if fi.file_type == proto.FILE:
                filtered_file_infos.append(fi)
            else:
                filtered_file_infos += self.list_file(commit, path, recursive=recursive)

        filtered_paths = [fi.file.path for fi in filtered_file_infos if fi.file_type == proto.FILE]

        return {path: b''.join(self.get_file(commit, path)) for path in filtered_paths}

    def inspect_file(self, commit, path):
        """
        returns info about a specific file.
        :param commit: A tuple or string representing the commit
        :param path: Path to file
        :return: A FileInfo object
        """
        return self.stub.InspectFile(proto.InspectFileRequest(
            file=proto.File(commit=commit_from(commit), path=path)
        ))

    def list_file(self, commit, path, recursive=False):
        """
        Lists the files in a directory
        :param commit: A tuple or string representing the commit
        :param path: The path to the directory
        :param recursive: If True, continue listing the files for sub-directories
        :return: A list of FileInfo objects
        """
        file_infos = self.stub.ListFile(proto.ListFileRequest(
            file=proto.File(commit=commit_from(commit), path=path)
        )).file_info

        if recursive:
            dirs = [f for f in file_infos if f.file_type == proto.DIR]
            files = [f for f in file_infos if f.file_type == proto.FILE]
            return sum([self.list_file(commit, d.file.path, recursive) for d in dirs], files)

        return list(file_infos)

    def glob_file(self, commit, pattern):
        """
        ?
        :param commit:
        :param pattern:
        :return: A list of FileInfo objects
        """
        r = self.stub.GlobFile(proto.GlobFileRequest(commit=commit_from(commit), pattern=pattern))
        if hasattr(r, 'file_info'):
            return r.file_info
        return []

    def delete_file(self, commit, path):
        """
        deletes a file from a Commit.
        DeleteFile leaves a tombstone in the Commit, assuming the file isn't written
        to later attempting to get the file from the finished commit will result in
        not found error.
        The file will of course remain intact in the Commit's parent.

        :param commit: A tuple or string representing the commit
        :param path: The path to the file
        """
        self.stub.DeleteFile(proto.DeleteFileRequest(
            file=proto.File(commit=commit_from(commit), path=path)
        ))

    def delete_all(self):
        self.stub.DeleteAll(proto.google_dot_protobuf_dot_empty__pb2.Empty())
</code></pre>
  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module variables</h2>
      <div class="item">
      <p id="python_pachyderm.pfs_client.BUFFER_SIZE" class="name">var <span class="ident">BUFFER_SIZE</span></p>
      
  
  <div class="source_cont">
</div>

      </div>


    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="python_pachyderm.pfs_client.ExtractValueIterator" class="name">class <span class="ident">ExtractValueIterator</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.ExtractValueIterator', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.ExtractValueIterator" class="source">
    <pre><code>class ExtractValueIterator(object):
    def __init__(self, r):
        self._iter = r

    def __iter__(self):
        for item in self._iter:
            yield item.value
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#python_pachyderm.pfs_client.ExtractValueIterator">ExtractValueIterator</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.ExtractValueIterator.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, r)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.ExtractValueIterator.__init__', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.ExtractValueIterator.__init__" class="source">
    <pre><code>def __init__(self, r):
    self._iter = r
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="python_pachyderm.pfs_client.PfsClient" class="name">class <span class="ident">PfsClient</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient" class="source">
    <pre><code>class PfsClient(object):
    def __init__(self, host=None, port=None):
        """
        Creates a client to connect to Pfs
        :param host: The pachd host. Default is 'localhost', which is used with `pachctl port-forward`
        :param port: The port to connect to. Default is 30650
        """
        # If a host or port is not specified, then try to set using environment variables or use the defaults.
        address = get_address(host, port)
        self.channel = grpc.grpc.insecure_channel(address)
        self.stub = grpc.APIStub(self.channel)

    def create_repo(self, repo_name, description=None):
        """
        Creates a new Repo object in pfs with the given name. Repos are
        the top level data object in pfs and should be used to store data of a
        similar type. For example rather than having a single Repo for an entire
        project you might have seperate Repos for logs, metrics, database dumps etc.
        :param repo_name: Name of the repo
        :param description: Repo description
        """
        self.stub.CreateRepo(proto.CreateRepoRequest(repo=proto.Repo(name=repo_name), description=description))

    def inspect_repo(self, repo_name):
        """
        returns info about a specific Repo.
        :param repo_name: Name of the repo
        :return: A RepoInfo object
        """
        return self.stub.InspectRepo(proto.InspectRepoRequest(repo=proto.Repo(name=repo_name)))

    def list_repo(self):
        """
        Returns info about all Repos.

        :param provenance: Optional. Specifies a set of provenance repos where only repos which have ALL of
        the specified repos as provenance will be returned.
        :return: A list of RepoInfo objects
        """
        x = self.stub.ListRepo(proto.ListRepoRequest())
        if hasattr(x, 'repo_info'):
            return x.repo_info
        return []

    def delete_repo(self, repo_name=None, force=False, all=False):
        """
        Deletes a repo and reclaims the storage space it was using. Note
        that as of 1.0 we do not reclaim the blocks that the Repo was referencing,
        this is because they may also be referenced by other Repos and deleting them
        would make those Repos inaccessible. This will be resolved in later
        versions.
        :param repo_name: The name of the repo
        :param force: if set to true, the repo will be removed regardless of errors.
                      This argument should be used with care.
        :param all: Delete all repos
        """
        if not all:
            if repo_name:
                self.stub.DeleteRepo(proto.DeleteRepoRequest(repo=proto.Repo(name=repo_name), force=force))
            else:
                raise ValueError("Either a repo_name or all=True needs to be provided")
        else:
            if not repo_name:
                self.stub.DeleteRepo(proto.DeleteRepoRequest(force=force, all=all))
            else:
                raise ValueError("Cannot specify a repo_name if all=True")

    def start_commit(self, repo_name, branch=None, parent=None):
        """
        Begins the process of committing data to a Repo. Once started
        you can write to the Commit with PutFile and when all the data has been
        written you must finish the Commit with FinishCommit. NOTE, data is not
        persisted until FinishCommit is called.
        :param repo_name: The name of the repo
        :param branch: is a more convenient way to build linear chains of commits. When a
                    commit is started with a non empty branch the value of branch becomes an
                    alias for the created Commit. This enables a more intuitive access pattern.
                    When the commit is started on a branch the previous head of the branch is
                    used as the parent of the commit.
        :param parent: specifies the parent Commit, upon creation the new Commit will
                    appear identical to the parent Commit, data can safely be added to the new
                    commit without affecting the contents of the parent Commit. You may pass ""
                    as parentCommit in which case the new Commit will have no parent and will
                    initially appear empty.
        :return: Commit object
        """
        return self.stub.StartCommit(proto.StartCommitRequest(
            parent=proto.Commit(
                repo=proto.Repo(name=repo_name),
                id=parent
            ),
            branch=branch
        ))

    def finish_commit(self, commit):
        """
        Ends the process of committing data to a Repo and persists the
        Commit. Once a Commit is finished the data becomes immutable and future
        attempts to write to it with PutFile will error.
        :param commit: A tuple or string representing the commit
        """
        self.stub.FinishCommit(proto.FinishCommitRequest(commit=commit_from(commit)))

    @contextmanager
    def commit(self, repo_name, branch=None, parent=None):
        """
        A context manager for doing stuff inside a commit
        """
        commit = self.start_commit(repo_name, branch, parent)
        try:
            yield commit
        except Exception as e:
            print("An exception occurred during an open commit. "
                  "Trying to finish it (Currently a commit can't be cancelled)")
            raise e
        finally:
            self.finish_commit(commit)

    def inspect_commit(self, commit):
        """
        returns info about a specific Commit.
        :param commit: A tuple or string representing the commit
        :return: CommitInfo object
        """
        return self.stub.InspectCommit(proto.InspectCommitRequest(commit=commit_from(commit)))

    def provenances_for_repo(self, repo_name):
        provenances = {}
        commits = self.list_commit(repo_name)
        sorted_commits = [x[0] for x in
                          sorted([(c.commit.id, c.finished.seconds) for c in commits], key=lambda x: x[1])]
        for c in sorted_commits:
            for p in c.provenance:
                provenances[p.id] = c.commit.id
        return provenances

    def list_commit(self, repo_name, to_commit=None, from_commit=None, number=0):
        """
        Lists commits.

        :param repo_name: If only `repo_name` is given, all commits in the repo are returned.
        :param to_commit: optional. only the ancestors of `to`, including `to` itself,
                        are considered.
        :param from_commit: optional. only the descendents of `from`, including `from`
                        itself, are considered.
        :param number: optional. determines how many commits are returned.  If `number` is 0,
                    all commits that match the aforementioned criteria are returned.
        :return: A list of CommitInfo objects
        """
        req = proto.ListCommitRequest(repo=proto.Repo(name=repo_name), number=number)
        if to_commit is not None:
            req.to.CopyFrom(commit_from(to_commit))
        if from_commit is not None:
            getattr(req, 'from').CopyFrom(commit_from(from_commit))
        x = self.stub.ListCommit(req)
        if hasattr(x, 'commit_info'):
            return x.commit_info
        return []

    def delete_commit(self, commit):
        """
        deletes a commit.
        Note it is currently not implemented.
        :param commit: A tuple or string representing the commit
        """
        self.stub.DeleteCommit(proto.DeleteCommitRequest(commit=commit_from(commit)))

    def flush_commit(self, commits, repos=tuple()):
        """
        blocks until all of the commits which have a set of commits as
        provenance have finished. For commits to be considered they must have all of
        the specified commits as provenance. This in effect waits for all of the
        jobs that are triggered by a set of commits to complete.
        It returns an error if any of the commits it's waiting on are cancelled due
        to one of the jobs encountering an error during runtime.
        Note that it's never necessary to call FlushCommit to run jobs, they'll run
        no matter what, FlushCommit just allows you to wait for them to complete and
        see their output once they do.
        :param commits: A commit or a list of commits to wait on
        :param repos: Optional. Only the commits up to and including those repos
                    will be considered, otherwise all repos are considered.
        :return: An iterator of CommitInfo objects
        """
        return self.stub.FlushCommit(proto.FlushCommitRequest(
            commit=[commit_from(c) for c in commits],
            to_repo=[proto.Repo(name=r) for r in repos]
        ))

    def subscribe_commit(self, repo_name, branch, from_commit_id=None):
        """
        SubscribeCommit is like ListCommit but it keeps listening for commits as
        they come in.

        :param repo_name: Name of the repo
        :param branch: Branch to subscribe to
        :param from_commit_id: Optional. only commits created since this commit are returned

        :return: Iterator of Commit objects
        """
        repo = proto.Repo(name=repo_name)
        req = proto.SubscribeCommitRequest(repo=repo, branch=branch)
        if from_commit_id is not None:
            getattr(req, 'from').CopyFrom(proto.Commit(repo=repo, id=from_commit_id))
        return self.stub.SubscribeCommit(req)

    def list_branch(self, repo_name):
        """
        lists the active branches on a Repo
        :param repo_name: The name of the repo
        :return: A list of Branch objects
        """
        x = self.stub.ListBranch(proto.ListBranchRequest(repo=proto.Repo(name=repo_name)))
        if hasattr(x, 'branch_info'):
            return x.branch_info
        return []

    def set_branch(self, commit, branch_name):
        """
        sets a commit and its ancestors as a branch
        :param commit: A tuple or string representing the commit
        :param branch_name: The name for the branch to set
        """
        self.stub.SetBranch(proto.SetBranchRequest(
            commit=commit_from(commit),
            branch=branch_name
        ))

    def delete_branch(self, repo_name, branch_name):
        """
        deletes a branch, but leaves the commits themselves intact.
        In other words, those commits can still be accessed via commit IDs and
        other branches they happen to be on.
        :param repo_name: The name of the repo
        :param branch_name: The name of the branch to delete
        """
        self.stub.DeleteBranch(proto.DeleteBranchRequest(
            repo=Repo(name=repo_name),
            branch=branch_name
        ))

    def put_file_bytes(self, commit, path, value, delimiter=proto.NONE,
                       target_file_datums=0, target_file_bytes=0):
        """
        Uploads a binary bytes array as file(s) in a certain path
        :param commit: A tuple or string representing the commit
        :param path: Path in the repo the file(s) will be written to
        :param value: The data bytes array, or an iterator returning chunked byte arrays
        :param delimiter: Optional. causes data to be broken up into separate files with `path`
                as a prefix.
        :param target_file_datums: Optional. specifies the target number of datums in each written
                file it may be lower if data does not split evenly, but will never be
                higher, unless the value is 0.
        :param target_file_bytes: specifies the target number of bytes in each written
                file, files may have more or fewer bytes than the target.
        """

        if isinstance(value, collections.Iterable) and not isinstance(value, (six.string_types, six.binary_type)):
            def wrap(v):
                for x in v:
                    yield proto.PutFileRequest(
                        file=proto.File(commit=commit_from(commit), path=path),
                        value=x,
                        delimiter=delimiter,
                        target_file_datums=target_file_datums,
                        target_file_bytes=target_file_bytes
                    )
        else:
            def wrap(v):
                for i in range(0, len(v), BUFFER_SIZE):
                    yield proto.PutFileRequest(
                        file=proto.File(commit=commit_from(commit), path=path),
                        value=v[i:i + BUFFER_SIZE],
                        delimiter=delimiter,
                        target_file_datums=target_file_datums,
                        target_file_bytes=target_file_bytes
                    )

        self.stub.PutFile(wrap(value))

    def put_file_url(self, commit, path, url, recursive=False):
        """
        puts a file using the content found at a URL.
        The URL is sent to the server which performs the request.

        :param commit: A tuple or string representing the commit
        :param path: The path to the file
        :param url: The url to download
        :param recursive: allow for recursive scraping of some types URLs for example on s3:// urls.
        """
        self.stub.PutFile(iter([
            proto.PutFileRequest(
                file=File(commit=commit_from(commit), path=path),
                url=url,
                recursive=recursive
            )
        ]))

    def get_file(self, commit, path, offset_bytes=0, size_bytes=0, extract_value=True):
        """
        returns the contents of a file at a specific Commit.

        :param commit: A tuple or string representing the commit
        :param path: The path of the file
        :param offset_bytes: Optional. specifies a number of bytes that should be skipped in the beginning of the file.
        :param size_bytes: Optional. limits the total amount of data returned, note you will get fewer bytes
                than size if you pass a value larger than the size of the file.
                If size is set to 0 then all of the data will be returned.
        :param extract_value: If True, then an ExtractValueIterator will be return, which
                    will iterate over the bytes of the file. If False, then the Protobuf
                    response iterator will return
        :return: An iterator over the file or an iterator over the protobuf responses
        """
        r = self.stub.GetFile(proto.GetFileRequest(
            file=proto.File(commit=commit_from(commit), path=path),
            offset_bytes=offset_bytes,
            size_bytes=size_bytes
        ))
        if extract_value:
            return ExtractValueIterator(r)
        return r

    def get_files(self, commit, paths, recursive=False):
        """
        returns the contents of a list of files at a specific Commit.

        :param commit: A tuple or string representing the commit
        :param paths: A list of paths to retrieve
        :param recursive: If True, will go into each directory in the list recursively
        :return: A dictionary of file paths and data
        """
        filtered_file_infos = []
        for path in paths:
            fi = self.inspect_file(commit, path)
            if fi.file_type == proto.FILE:
                filtered_file_infos.append(fi)
            else:
                filtered_file_infos += self.list_file(commit, path, recursive=recursive)

        filtered_paths = [fi.file.path for fi in filtered_file_infos if fi.file_type == proto.FILE]

        return {path: b''.join(self.get_file(commit, path)) for path in filtered_paths}

    def inspect_file(self, commit, path):
        """
        returns info about a specific file.
        :param commit: A tuple or string representing the commit
        :param path: Path to file
        :return: A FileInfo object
        """
        return self.stub.InspectFile(proto.InspectFileRequest(
            file=proto.File(commit=commit_from(commit), path=path)
        ))

    def list_file(self, commit, path, recursive=False):
        """
        Lists the files in a directory
        :param commit: A tuple or string representing the commit
        :param path: The path to the directory
        :param recursive: If True, continue listing the files for sub-directories
        :return: A list of FileInfo objects
        """
        file_infos = self.stub.ListFile(proto.ListFileRequest(
            file=proto.File(commit=commit_from(commit), path=path)
        )).file_info

        if recursive:
            dirs = [f for f in file_infos if f.file_type == proto.DIR]
            files = [f for f in file_infos if f.file_type == proto.FILE]
            return sum([self.list_file(commit, d.file.path, recursive) for d in dirs], files)

        return list(file_infos)

    def glob_file(self, commit, pattern):
        """
        ?
        :param commit:
        :param pattern:
        :return: A list of FileInfo objects
        """
        r = self.stub.GlobFile(proto.GlobFileRequest(commit=commit_from(commit), pattern=pattern))
        if hasattr(r, 'file_info'):
            return r.file_info
        return []

    def delete_file(self, commit, path):
        """
        deletes a file from a Commit.
        DeleteFile leaves a tombstone in the Commit, assuming the file isn't written
        to later attempting to get the file from the finished commit will result in
        not found error.
        The file will of course remain intact in the Commit's parent.

        :param commit: A tuple or string representing the commit
        :param path: The path to the file
        """
        self.stub.DeleteFile(proto.DeleteFileRequest(
            file=proto.File(commit=commit_from(commit), path=path)
        ))

    def delete_all(self):
        self.stub.DeleteAll(proto.google_dot_protobuf_dot_empty__pb2.Empty())
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#python_pachyderm.pfs_client.PfsClient">PfsClient</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, host=None, port=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a client to connect to Pfs
:param host: The pachd host. Default is 'localhost', which is used with <code>pachctl port-forward</code>
:param port: The port to connect to. Default is 30650</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.__init__', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.__init__" class="source">
    <pre><code>def __init__(self, host=None, port=None):
    """
    Creates a client to connect to Pfs
    :param host: The pachd host. Default is 'localhost', which is used with `pachctl port-forward`
    :param port: The port to connect to. Default is 30650
    """
    # If a host or port is not specified, then try to set using environment variables or use the defaults.
    address = get_address(host, port)
    self.channel = grpc.grpc.insecure_channel(address)
    self.stub = grpc.APIStub(self.channel)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.commit">
    <p>def <span class="ident">commit</span>(</p><p>*args, **kwds)</p>
    </div>
    

    
  
    <div class="desc"><p>A context manager for doing stuff inside a commit</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.commit', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.commit" class="source">
    <pre><code>@contextmanager
def commit(self, repo_name, branch=None, parent=None):
    """
    A context manager for doing stuff inside a commit
    """
    commit = self.start_commit(repo_name, branch, parent)
    try:
        yield commit
    except Exception as e:
        print("An exception occurred during an open commit. "
              "Trying to finish it (Currently a commit can't be cancelled)")
        raise e
    finally:
        self.finish_commit(commit)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.create_repo">
    <p>def <span class="ident">create_repo</span>(</p><p>self, repo_name, description=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new Repo object in pfs with the given name. Repos are
the top level data object in pfs and should be used to store data of a
similar type. For example rather than having a single Repo for an entire
project you might have seperate Repos for logs, metrics, database dumps etc.
:param repo_name: Name of the repo
:param description: Repo description</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.create_repo', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.create_repo" class="source">
    <pre><code>def create_repo(self, repo_name, description=None):
    """
    Creates a new Repo object in pfs with the given name. Repos are
    the top level data object in pfs and should be used to store data of a
    similar type. For example rather than having a single Repo for an entire
    project you might have seperate Repos for logs, metrics, database dumps etc.
    :param repo_name: Name of the repo
    :param description: Repo description
    """
    self.stub.CreateRepo(proto.CreateRepoRequest(repo=proto.Repo(name=repo_name), description=description))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.delete_all">
    <p>def <span class="ident">delete_all</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.delete_all', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.delete_all" class="source">
    <pre><code>def delete_all(self):
    self.stub.DeleteAll(proto.google_dot_protobuf_dot_empty__pb2.Empty())
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.delete_branch">
    <p>def <span class="ident">delete_branch</span>(</p><p>self, repo_name, branch_name)</p>
    </div>
    

    
  
    <div class="desc"><p>deletes a branch, but leaves the commits themselves intact.
In other words, those commits can still be accessed via commit IDs and
other branches they happen to be on.
:param repo_name: The name of the repo
:param branch_name: The name of the branch to delete</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.delete_branch', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.delete_branch" class="source">
    <pre><code>def delete_branch(self, repo_name, branch_name):
    """
    deletes a branch, but leaves the commits themselves intact.
    In other words, those commits can still be accessed via commit IDs and
    other branches they happen to be on.
    :param repo_name: The name of the repo
    :param branch_name: The name of the branch to delete
    """
    self.stub.DeleteBranch(proto.DeleteBranchRequest(
        repo=Repo(name=repo_name),
        branch=branch_name
    ))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.delete_commit">
    <p>def <span class="ident">delete_commit</span>(</p><p>self, commit)</p>
    </div>
    

    
  
    <div class="desc"><p>deletes a commit.
Note it is currently not implemented.
:param commit: A tuple or string representing the commit</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.delete_commit', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.delete_commit" class="source">
    <pre><code>def delete_commit(self, commit):
    """
    deletes a commit.
    Note it is currently not implemented.
    :param commit: A tuple or string representing the commit
    """
    self.stub.DeleteCommit(proto.DeleteCommitRequest(commit=commit_from(commit)))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.delete_file">
    <p>def <span class="ident">delete_file</span>(</p><p>self, commit, path)</p>
    </div>
    

    
  
    <div class="desc"><p>deletes a file from a Commit.
DeleteFile leaves a tombstone in the Commit, assuming the file isn't written
to later attempting to get the file from the finished commit will result in
not found error.
The file will of course remain intact in the Commit's parent.</p>
<p>:param commit: A tuple or string representing the commit
:param path: The path to the file</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.delete_file', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.delete_file" class="source">
    <pre><code>def delete_file(self, commit, path):
    """
    deletes a file from a Commit.
    DeleteFile leaves a tombstone in the Commit, assuming the file isn't written
    to later attempting to get the file from the finished commit will result in
    not found error.
    The file will of course remain intact in the Commit's parent.
    :param commit: A tuple or string representing the commit
    :param path: The path to the file
    """
    self.stub.DeleteFile(proto.DeleteFileRequest(
        file=proto.File(commit=commit_from(commit), path=path)
    ))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.delete_repo">
    <p>def <span class="ident">delete_repo</span>(</p><p>self, repo_name=None, force=False, all=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Deletes a repo and reclaims the storage space it was using. Note
that as of 1.0 we do not reclaim the blocks that the Repo was referencing,
this is because they may also be referenced by other Repos and deleting them
would make those Repos inaccessible. This will be resolved in later
versions.
:param repo_name: The name of the repo
:param force: if set to true, the repo will be removed regardless of errors.
              This argument should be used with care.
:param all: Delete all repos</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.delete_repo', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.delete_repo" class="source">
    <pre><code>def delete_repo(self, repo_name=None, force=False, all=False):
    """
    Deletes a repo and reclaims the storage space it was using. Note
    that as of 1.0 we do not reclaim the blocks that the Repo was referencing,
    this is because they may also be referenced by other Repos and deleting them
    would make those Repos inaccessible. This will be resolved in later
    versions.
    :param repo_name: The name of the repo
    :param force: if set to true, the repo will be removed regardless of errors.
                  This argument should be used with care.
    :param all: Delete all repos
    """
    if not all:
        if repo_name:
            self.stub.DeleteRepo(proto.DeleteRepoRequest(repo=proto.Repo(name=repo_name), force=force))
        else:
            raise ValueError("Either a repo_name or all=True needs to be provided")
    else:
        if not repo_name:
            self.stub.DeleteRepo(proto.DeleteRepoRequest(force=force, all=all))
        else:
            raise ValueError("Cannot specify a repo_name if all=True")
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.finish_commit">
    <p>def <span class="ident">finish_commit</span>(</p><p>self, commit)</p>
    </div>
    

    
  
    <div class="desc"><p>Ends the process of committing data to a Repo and persists the
Commit. Once a Commit is finished the data becomes immutable and future
attempts to write to it with PutFile will error.
:param commit: A tuple or string representing the commit</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.finish_commit', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.finish_commit" class="source">
    <pre><code>def finish_commit(self, commit):
    """
    Ends the process of committing data to a Repo and persists the
    Commit. Once a Commit is finished the data becomes immutable and future
    attempts to write to it with PutFile will error.
    :param commit: A tuple or string representing the commit
    """
    self.stub.FinishCommit(proto.FinishCommitRequest(commit=commit_from(commit)))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.flush_commit">
    <p>def <span class="ident">flush_commit</span>(</p><p>self, commits, repos=())</p>
    </div>
    

    
  
    <div class="desc"><p>blocks until all of the commits which have a set of commits as
provenance have finished. For commits to be considered they must have all of
the specified commits as provenance. This in effect waits for all of the
jobs that are triggered by a set of commits to complete.
It returns an error if any of the commits it's waiting on are cancelled due
to one of the jobs encountering an error during runtime.
Note that it's never necessary to call FlushCommit to run jobs, they'll run
no matter what, FlushCommit just allows you to wait for them to complete and
see their output once they do.
:param commits: A commit or a list of commits to wait on
:param repos: Optional. Only the commits up to and including those repos
            will be considered, otherwise all repos are considered.
:return: An iterator of CommitInfo objects</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.flush_commit', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.flush_commit" class="source">
    <pre><code>def flush_commit(self, commits, repos=tuple()):
    """
    blocks until all of the commits which have a set of commits as
    provenance have finished. For commits to be considered they must have all of
    the specified commits as provenance. This in effect waits for all of the
    jobs that are triggered by a set of commits to complete.
    It returns an error if any of the commits it's waiting on are cancelled due
    to one of the jobs encountering an error during runtime.
    Note that it's never necessary to call FlushCommit to run jobs, they'll run
    no matter what, FlushCommit just allows you to wait for them to complete and
    see their output once they do.
    :param commits: A commit or a list of commits to wait on
    :param repos: Optional. Only the commits up to and including those repos
                will be considered, otherwise all repos are considered.
    :return: An iterator of CommitInfo objects
    """
    return self.stub.FlushCommit(proto.FlushCommitRequest(
        commit=[commit_from(c) for c in commits],
        to_repo=[proto.Repo(name=r) for r in repos]
    ))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.get_file">
    <p>def <span class="ident">get_file</span>(</p><p>self, commit, path, offset_bytes=0, size_bytes=0, extract_value=True)</p>
    </div>
    

    
  
    <div class="desc"><p>returns the contents of a file at a specific Commit.</p>
<p>:param commit: A tuple or string representing the commit
:param path: The path of the file
:param offset_bytes: Optional. specifies a number of bytes that should be skipped in the beginning of the file.
:param size_bytes: Optional. limits the total amount of data returned, note you will get fewer bytes
        than size if you pass a value larger than the size of the file.
        If size is set to 0 then all of the data will be returned.
:param extract_value: If True, then an ExtractValueIterator will be return, which
            will iterate over the bytes of the file. If False, then the Protobuf
            response iterator will return
:return: An iterator over the file or an iterator over the protobuf responses</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.get_file', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.get_file" class="source">
    <pre><code>def get_file(self, commit, path, offset_bytes=0, size_bytes=0, extract_value=True):
    """
    returns the contents of a file at a specific Commit.
    :param commit: A tuple or string representing the commit
    :param path: The path of the file
    :param offset_bytes: Optional. specifies a number of bytes that should be skipped in the beginning of the file.
    :param size_bytes: Optional. limits the total amount of data returned, note you will get fewer bytes
            than size if you pass a value larger than the size of the file.
            If size is set to 0 then all of the data will be returned.
    :param extract_value: If True, then an ExtractValueIterator will be return, which
                will iterate over the bytes of the file. If False, then the Protobuf
                response iterator will return
    :return: An iterator over the file or an iterator over the protobuf responses
    """
    r = self.stub.GetFile(proto.GetFileRequest(
        file=proto.File(commit=commit_from(commit), path=path),
        offset_bytes=offset_bytes,
        size_bytes=size_bytes
    ))
    if extract_value:
        return ExtractValueIterator(r)
    return r
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.get_files">
    <p>def <span class="ident">get_files</span>(</p><p>self, commit, paths, recursive=False)</p>
    </div>
    

    
  
    <div class="desc"><p>returns the contents of a list of files at a specific Commit.</p>
<p>:param commit: A tuple or string representing the commit
:param paths: A list of paths to retrieve
:param recursive: If True, will go into each directory in the list recursively
:return: A dictionary of file paths and data</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.get_files', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.get_files" class="source">
    <pre><code>def get_files(self, commit, paths, recursive=False):
    """
    returns the contents of a list of files at a specific Commit.
    :param commit: A tuple or string representing the commit
    :param paths: A list of paths to retrieve
    :param recursive: If True, will go into each directory in the list recursively
    :return: A dictionary of file paths and data
    """
    filtered_file_infos = []
    for path in paths:
        fi = self.inspect_file(commit, path)
        if fi.file_type == proto.FILE:
            filtered_file_infos.append(fi)
        else:
            filtered_file_infos += self.list_file(commit, path, recursive=recursive)
    filtered_paths = [fi.file.path for fi in filtered_file_infos if fi.file_type == proto.FILE]
    return {path: b''.join(self.get_file(commit, path)) for path in filtered_paths}
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.glob_file">
    <p>def <span class="ident">glob_file</span>(</p><p>self, commit, pattern)</p>
    </div>
    

    
  
    <div class="desc"><p>?
:param commit:
:param pattern:
:return: A list of FileInfo objects</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.glob_file', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.glob_file" class="source">
    <pre><code>def glob_file(self, commit, pattern):
    """
    ?
    :param commit:
    :param pattern:
    :return: A list of FileInfo objects
    """
    r = self.stub.GlobFile(proto.GlobFileRequest(commit=commit_from(commit), pattern=pattern))
    if hasattr(r, 'file_info'):
        return r.file_info
    return []
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.inspect_commit">
    <p>def <span class="ident">inspect_commit</span>(</p><p>self, commit)</p>
    </div>
    

    
  
    <div class="desc"><p>returns info about a specific Commit.
:param commit: A tuple or string representing the commit
:return: CommitInfo object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.inspect_commit', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.inspect_commit" class="source">
    <pre><code>def inspect_commit(self, commit):
    """
    returns info about a specific Commit.
    :param commit: A tuple or string representing the commit
    :return: CommitInfo object
    """
    return self.stub.InspectCommit(proto.InspectCommitRequest(commit=commit_from(commit)))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.inspect_file">
    <p>def <span class="ident">inspect_file</span>(</p><p>self, commit, path)</p>
    </div>
    

    
  
    <div class="desc"><p>returns info about a specific file.
:param commit: A tuple or string representing the commit
:param path: Path to file
:return: A FileInfo object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.inspect_file', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.inspect_file" class="source">
    <pre><code>def inspect_file(self, commit, path):
    """
    returns info about a specific file.
    :param commit: A tuple or string representing the commit
    :param path: Path to file
    :return: A FileInfo object
    """
    return self.stub.InspectFile(proto.InspectFileRequest(
        file=proto.File(commit=commit_from(commit), path=path)
    ))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.inspect_repo">
    <p>def <span class="ident">inspect_repo</span>(</p><p>self, repo_name)</p>
    </div>
    

    
  
    <div class="desc"><p>returns info about a specific Repo.
:param repo_name: Name of the repo
:return: A RepoInfo object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.inspect_repo', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.inspect_repo" class="source">
    <pre><code>def inspect_repo(self, repo_name):
    """
    returns info about a specific Repo.
    :param repo_name: Name of the repo
    :return: A RepoInfo object
    """
    return self.stub.InspectRepo(proto.InspectRepoRequest(repo=proto.Repo(name=repo_name)))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.list_branch">
    <p>def <span class="ident">list_branch</span>(</p><p>self, repo_name)</p>
    </div>
    

    
  
    <div class="desc"><p>lists the active branches on a Repo
:param repo_name: The name of the repo
:return: A list of Branch objects</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.list_branch', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.list_branch" class="source">
    <pre><code>def list_branch(self, repo_name):
    """
    lists the active branches on a Repo
    :param repo_name: The name of the repo
    :return: A list of Branch objects
    """
    x = self.stub.ListBranch(proto.ListBranchRequest(repo=proto.Repo(name=repo_name)))
    if hasattr(x, 'branch_info'):
        return x.branch_info
    return []
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.list_commit">
    <p>def <span class="ident">list_commit</span>(</p><p>self, repo_name, to_commit=None, from_commit=None, number=0)</p>
    </div>
    

    
  
    <div class="desc"><p>Lists commits.</p>
<p>:param repo_name: If only <code>repo_name</code> is given, all commits in the repo are returned.
:param to_commit: optional. only the ancestors of <code>to</code>, including <code>to</code> itself,
                are considered.
:param from_commit: optional. only the descendents of <code>from</code>, including <code>from</code>
                itself, are considered.
:param number: optional. determines how many commits are returned.  If <code>number</code> is 0,
            all commits that match the aforementioned criteria are returned.
:return: A list of CommitInfo objects</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.list_commit', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.list_commit" class="source">
    <pre><code>def list_commit(self, repo_name, to_commit=None, from_commit=None, number=0):
    """
    Lists commits.
    :param repo_name: If only `repo_name` is given, all commits in the repo are returned.
    :param to_commit: optional. only the ancestors of `to`, including `to` itself,
                    are considered.
    :param from_commit: optional. only the descendents of `from`, including `from`
                    itself, are considered.
    :param number: optional. determines how many commits are returned.  If `number` is 0,
                all commits that match the aforementioned criteria are returned.
    :return: A list of CommitInfo objects
    """
    req = proto.ListCommitRequest(repo=proto.Repo(name=repo_name), number=number)
    if to_commit is not None:
        req.to.CopyFrom(commit_from(to_commit))
    if from_commit is not None:
        getattr(req, 'from').CopyFrom(commit_from(from_commit))
    x = self.stub.ListCommit(req)
    if hasattr(x, 'commit_info'):
        return x.commit_info
    return []
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.list_file">
    <p>def <span class="ident">list_file</span>(</p><p>self, commit, path, recursive=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Lists the files in a directory
:param commit: A tuple or string representing the commit
:param path: The path to the directory
:param recursive: If True, continue listing the files for sub-directories
:return: A list of FileInfo objects</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.list_file', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.list_file" class="source">
    <pre><code>def list_file(self, commit, path, recursive=False):
    """
    Lists the files in a directory
    :param commit: A tuple or string representing the commit
    :param path: The path to the directory
    :param recursive: If True, continue listing the files for sub-directories
    :return: A list of FileInfo objects
    """
    file_infos = self.stub.ListFile(proto.ListFileRequest(
        file=proto.File(commit=commit_from(commit), path=path)
    )).file_info
    if recursive:
        dirs = [f for f in file_infos if f.file_type == proto.DIR]
        files = [f for f in file_infos if f.file_type == proto.FILE]
        return sum([self.list_file(commit, d.file.path, recursive) for d in dirs], files)
    return list(file_infos)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.list_repo">
    <p>def <span class="ident">list_repo</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns info about all Repos.</p>
<p>:param provenance: Optional. Specifies a set of provenance repos where only repos which have ALL of
the specified repos as provenance will be returned.
:return: A list of RepoInfo objects</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.list_repo', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.list_repo" class="source">
    <pre><code>def list_repo(self):
    """
    Returns info about all Repos.
    :param provenance: Optional. Specifies a set of provenance repos where only repos which have ALL of
    the specified repos as provenance will be returned.
    :return: A list of RepoInfo objects
    """
    x = self.stub.ListRepo(proto.ListRepoRequest())
    if hasattr(x, 'repo_info'):
        return x.repo_info
    return []
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.provenances_for_repo">
    <p>def <span class="ident">provenances_for_repo</span>(</p><p>self, repo_name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.provenances_for_repo', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.provenances_for_repo" class="source">
    <pre><code>def provenances_for_repo(self, repo_name):
    provenances = {}
    commits = self.list_commit(repo_name)
    sorted_commits = [x[0] for x in
                      sorted([(c.commit.id, c.finished.seconds) for c in commits], key=lambda x: x[1])]
    for c in sorted_commits:
        for p in c.provenance:
            provenances[p.id] = c.commit.id
    return provenances
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.put_file_bytes">
    <p>def <span class="ident">put_file_bytes</span>(</p><p>self, commit, path, value, delimiter=0, target_file_datums=0, target_file_bytes=0)</p>
    </div>
    

    
  
    <div class="desc"><p>Uploads a binary bytes array as file(s) in a certain path
:param commit: A tuple or string representing the commit
:param path: Path in the repo the file(s) will be written to
:param value: The data bytes array, or an iterator returning chunked byte arrays
:param delimiter: Optional. causes data to be broken up into separate files with <code>path</code>
        as a prefix.
:param target_file_datums: Optional. specifies the target number of datums in each written
        file it may be lower if data does not split evenly, but will never be
        higher, unless the value is 0.
:param target_file_bytes: specifies the target number of bytes in each written
        file, files may have more or fewer bytes than the target.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.put_file_bytes', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.put_file_bytes" class="source">
    <pre><code>def put_file_bytes(self, commit, path, value, delimiter=proto.NONE,
                   target_file_datums=0, target_file_bytes=0):
    """
    Uploads a binary bytes array as file(s) in a certain path
    :param commit: A tuple or string representing the commit
    :param path: Path in the repo the file(s) will be written to
    :param value: The data bytes array, or an iterator returning chunked byte arrays
    :param delimiter: Optional. causes data to be broken up into separate files with `path`
            as a prefix.
    :param target_file_datums: Optional. specifies the target number of datums in each written
            file it may be lower if data does not split evenly, but will never be
            higher, unless the value is 0.
    :param target_file_bytes: specifies the target number of bytes in each written
            file, files may have more or fewer bytes than the target.
    """
    if isinstance(value, collections.Iterable) and not isinstance(value, (six.string_types, six.binary_type)):
        def wrap(v):
            for x in v:
                yield proto.PutFileRequest(
                    file=proto.File(commit=commit_from(commit), path=path),
                    value=x,
                    delimiter=delimiter,
                    target_file_datums=target_file_datums,
                    target_file_bytes=target_file_bytes
                )
    else:
        def wrap(v):
            for i in range(0, len(v), BUFFER_SIZE):
                yield proto.PutFileRequest(
                    file=proto.File(commit=commit_from(commit), path=path),
                    value=v[i:i + BUFFER_SIZE],
                    delimiter=delimiter,
                    target_file_datums=target_file_datums,
                    target_file_bytes=target_file_bytes
                )
    self.stub.PutFile(wrap(value))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.put_file_url">
    <p>def <span class="ident">put_file_url</span>(</p><p>self, commit, path, url, recursive=False)</p>
    </div>
    

    
  
    <div class="desc"><p>puts a file using the content found at a URL.
The URL is sent to the server which performs the request.</p>
<p>:param commit: A tuple or string representing the commit
:param path: The path to the file
:param url: The url to download
:param recursive: allow for recursive scraping of some types URLs for example on s3:// urls.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.put_file_url', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.put_file_url" class="source">
    <pre><code>def put_file_url(self, commit, path, url, recursive=False):
    """
    puts a file using the content found at a URL.
    The URL is sent to the server which performs the request.
    :param commit: A tuple or string representing the commit
    :param path: The path to the file
    :param url: The url to download
    :param recursive: allow for recursive scraping of some types URLs for example on s3:// urls.
    """
    self.stub.PutFile(iter([
        proto.PutFileRequest(
            file=File(commit=commit_from(commit), path=path),
            url=url,
            recursive=recursive
        )
    ]))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.set_branch">
    <p>def <span class="ident">set_branch</span>(</p><p>self, commit, branch_name)</p>
    </div>
    

    
  
    <div class="desc"><p>sets a commit and its ancestors as a branch
:param commit: A tuple or string representing the commit
:param branch_name: The name for the branch to set</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.set_branch', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.set_branch" class="source">
    <pre><code>def set_branch(self, commit, branch_name):
    """
    sets a commit and its ancestors as a branch
    :param commit: A tuple or string representing the commit
    :param branch_name: The name for the branch to set
    """
    self.stub.SetBranch(proto.SetBranchRequest(
        commit=commit_from(commit),
        branch=branch_name
    ))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.start_commit">
    <p>def <span class="ident">start_commit</span>(</p><p>self, repo_name, branch=None, parent=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Begins the process of committing data to a Repo. Once started
you can write to the Commit with PutFile and when all the data has been
written you must finish the Commit with FinishCommit. NOTE, data is not
persisted until FinishCommit is called.
:param repo_name: The name of the repo
:param branch: is a more convenient way to build linear chains of commits. When a
            commit is started with a non empty branch the value of branch becomes an
            alias for the created Commit. This enables a more intuitive access pattern.
            When the commit is started on a branch the previous head of the branch is
            used as the parent of the commit.
:param parent: specifies the parent Commit, upon creation the new Commit will
            appear identical to the parent Commit, data can safely be added to the new
            commit without affecting the contents of the parent Commit. You may pass ""
            as parentCommit in which case the new Commit will have no parent and will
            initially appear empty.
:return: Commit object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.start_commit', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.start_commit" class="source">
    <pre><code>def start_commit(self, repo_name, branch=None, parent=None):
    """
    Begins the process of committing data to a Repo. Once started
    you can write to the Commit with PutFile and when all the data has been
    written you must finish the Commit with FinishCommit. NOTE, data is not
    persisted until FinishCommit is called.
    :param repo_name: The name of the repo
    :param branch: is a more convenient way to build linear chains of commits. When a
                commit is started with a non empty branch the value of branch becomes an
                alias for the created Commit. This enables a more intuitive access pattern.
                When the commit is started on a branch the previous head of the branch is
                used as the parent of the commit.
    :param parent: specifies the parent Commit, upon creation the new Commit will
                appear identical to the parent Commit, data can safely be added to the new
                commit without affecting the contents of the parent Commit. You may pass ""
                as parentCommit in which case the new Commit will have no parent and will
                initially appear empty.
    :return: Commit object
    """
    return self.stub.StartCommit(proto.StartCommitRequest(
        parent=proto.Commit(
            repo=proto.Repo(name=repo_name),
            id=parent
        ),
        branch=branch
    ))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="python_pachyderm.pfs_client.PfsClient.subscribe_commit">
    <p>def <span class="ident">subscribe_commit</span>(</p><p>self, repo_name, branch, from_commit_id=None)</p>
    </div>
    

    
  
    <div class="desc"><p>SubscribeCommit is like ListCommit but it keeps listening for commits as
they come in.</p>
<p>:param repo_name: Name of the repo
:param branch: Branch to subscribe to
:param from_commit_id: Optional. only commits created since this commit are returned</p>
<p>:return: Iterator of Commit objects</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-python_pachyderm.pfs_client.PfsClient.subscribe_commit', this);">Show source &equiv;</a></p>
  <div id="source-python_pachyderm.pfs_client.PfsClient.subscribe_commit" class="source">
    <pre><code>def subscribe_commit(self, repo_name, branch, from_commit_id=None):
    """
    SubscribeCommit is like ListCommit but it keeps listening for commits as
    they come in.
    :param repo_name: Name of the repo
    :param branch: Branch to subscribe to
    :param from_commit_id: Optional. only commits created since this commit are returned
    :return: Iterator of Commit objects
    """
    repo = proto.Repo(name=repo_name)
    req = proto.SubscribeCommitRequest(repo=repo, branch=branch)
    if from_commit_id is not None:
        getattr(req, 'from').CopyFrom(proto.Commit(repo=repo, id=from_commit_id))
    return self.stub.SubscribeCommit(req)
</code></pre>
  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="python_pachyderm.pfs_client.PfsClient.channel" class="name">var <span class="ident">channel</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="python_pachyderm.pfs_client.PfsClient.stub" class="name">var <span class="ident">stub</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
